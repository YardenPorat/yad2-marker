window.onload=async function(){let e={filtered:await async function(){var e=new Promise((function(e,t){chrome.storage.sync.get(["filtered"],(t=>{e(t.filtered)}))}));return await e||[]}()};function t(t){let o=e.filtered.indexOf(t);null!=t&&(-1==o?(e.filtered.push(t),console.log(`ID '${t}' wasn't on storage, therefore it was added to storage and grayed`)):(function(t,o){e.filtered.splice(t,1),document.querySelector(`[item-id="${o}"]`).firstElementChild.style.backgroundColor=null}(o,t),console.log(`ID '${t}' was already on storage, so it was removed`))),chrome.storage.sync.set({filtered:e.filtered})}console.log("yad2 marker initiated"),adsArray=Array.from(document.querySelectorAll(".yad1_feed_item.premium, .yad1_row.top, .recommended_agencies, .inner_aside_container, .homeprices, #desktop-top-banners, .top_boxes_row.inactive, .y1_right_side.dynamic_cmp.accordion_wide_theme, .dynamic_cmp_wrapper.size_x1_3.gray_back, .feed-list-platinum, .dominant_realtor")),adsArray.forEach((e=>e.style.display="none")),pagePosts=Array.from(document.querySelectorAll(".feed_item")),pagePosts.forEach((e=>{e.insertAdjacentHTML("beforebegin",'<div style="position: absolute; right: -25px; cursor: pointer;" class="close-ad"><svg fill="#ff0000" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g id="Duotone"></g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g>\n</svg></div>')})),function(){const e=document.getElementsByClassName("close-ad");for(let o=0;o<e.length;o++)e[o].addEventListener("click",(function(e){this.nextSibling.firstElementChild.style.backgroundColor="gray",id=this.nextSibling.getAttribute("item-id"),t(id)}))}(),console.log(e.filtered.length+" ads in memory"),e.filtered.forEach((e=>{const t=document.querySelector(`[item-id="${e}"]`);t&&(t.firstElementChild.style.backgroundColor="gray",console.log(`'${e}' succesfully hidden`))}))};